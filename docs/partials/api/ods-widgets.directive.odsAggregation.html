<h1><code ng:non-bindable="">odsAggregation</code>
<div><span class="hint">directive in module <code ng:non-bindable="">ods-widgets</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p>The odsAggregation widget creates a variable that contains the result of an aggregation function based on a context.</p>
<p>Aggregations are functions that enable to group records and compute statistical values for numeric fields. For instance, aggregations can determine, based on several records, the smallest or biggest value among them, compute the average value or count the number of values for a chosen field.</p>
<p>odsAggregation supports multiple declarations of aggregations.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as attribute<pre class="prettyprint linenums">&lt;ANY ods-aggregation="{string}"
     ods-aggregation-context="{DatasetContext}"
     ods-aggregation[-variablename]-context="{DatasetContext}"
     ods-aggregation-function="{string}"
     ods-aggregation[-variablename]-function="{string}"
     ods-aggregation-expression="{string}"
     ods-aggregation[-variablename]-expression="{string}"&gt;
   ...
&lt;/ANY&gt;</pre>
<h3 id="usage_directive-info">Directive info</h3>
<div class="directive-info"><ul><li>This directive creates new scope.</li>
</ul>
</div>
<h4 id="usage_directive-info_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>odsAggregation</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p><i>(mandatory)</i> Name of the variable that holds the result of the aggregation. For multiple aggregations, variable names must be separated with commas.</p>
</div> <p><em>(default: aggregation)</em></p></td></tr><tr><td>odsAggregationContext</td><td><a href="" class="label type-hint type-hint-datasetcontext">DatasetContext</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p><i>(mandatory)</i> <a href="#/api/ods-widgets.directive:odsDatasetContext">Dataset Context</a> to use.</p>
</div></td></tr><tr><td>odsAggregation[Variablename]Context</td><td><a href="" class="label type-hint type-hint-datasetcontext">DatasetContext</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p>Context specific to the <code>[Variablename]</code> aggregation. <code>[Variablename]</code> must be replaced with the name of the variable, declared through the <strong>odsAggregation</strong> parameter.</p>
</div></td></tr><tr><td>odsAggregationFunction</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p><i>(mandatory)</i> Aggregation function to apply:</p>
<ul>
<li>AVG: average</li>
<li>COUNT</li>
<li>MIN: minimum</li>
<li>MAX: maximum</li>
<li>STDDEV: standard deviation</li>
<li>SUM</li>
</ul>
</div> <p><em>(default: COUNT)</em></p></td></tr><tr><td>odsAggregation[Variablename]Function</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p>Function specific to the <code>[Variablename]</code> aggregation. <code>[Variablename]</code> must be replaced with the name of the variable, declared through the <strong>odsAggregation</strong> parameter.</p>
</div> <p><em>(default: COUNT)</em></p></td></tr><tr><td>odsAggregationExpression</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p><i>(optional only with the COUNT function)</i> Expression to apply the function on (e.g., the name of a field).</p>
</div> <p><em>(default: none)</em></p></td></tr><tr><td>odsAggregation[Variablename]Expression</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><p>Expression specific to the <code>[Variablename]</code> aggregation. <code>[Variablename]</code> must be replaced with the name of the variable, declared through the <strong>odsAggregation</strong> parameter.</p>
</div> <p><em>(default: none)</em></p></td></tr></tbody></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="ods-widgets-directive-page ods-widgets-directive-odsaggregation-page"><h4 id="example_source">Source</h4>
<div source-edit="ods-widgets" source-edit-deps="angular.js" source-edit-html="simple_aggregation.html" source-edit-css="" source-edit-js="" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="simple_aggregation.html">
<pre class="prettyprint linenums" ng-set-text="simple_aggregation.html"></pre>
<script type="text/ng-template" id="simple_aggregation.html">
<ods-dataset-context context="tree"
                 tree-dataset="les-arbres-remarquables-de-paris"
                 tree-domain="https://documentation-resources.opendatasoft.com/">
<div ods-aggregation="height"
     ods-aggregation-context="tree"
     ods-aggregation-expression="hauteur_en_m"
     ods-aggregation-function="AVG">
    Average height is {{ height | number }} meters.
</div>
</ods-dataset-context>
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="ods-widgets" ng-set-html="simple_aggregation.html" ng-eval-javascript=""></div>
<h4 id="example_source">Source</h4>
<div source-edit="ods-widgets" source-edit-deps="angular.js" source-edit-html="multiple_aggregations.html" source-edit-css="" source-edit-js="" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="multiple_aggregations.html">
<pre class="prettyprint linenums" ng-set-text="multiple_aggregations.html"></pre>
<script type="text/ng-template" id="multiple_aggregations.html">
<ods-dataset-context context="commute,demographics"
                 commute-dataset="average-commute-time-by-county"
                 commute-domain="https://documentation-resources.opendatasoft.com/"
                 demographics-dataset="us-cities-demographics"
                 demographics-domain="https://documentation-resources.opendatasoft.com/">
<div ods-aggregation="people, time"
     ods-aggregation-people-context="demographics"
     ods-aggregation-people-function="SUM"
     ods-aggregation-people-expression="count"
     ods-aggregation-time-context="commute"
     ods-aggregation-time-function="AVG"
     ods-aggregation-time-expression="commuting_time">
    For {{ people }} people in the US, the average commute time in 2015 was {{ time|number:0 }} minutes.
</div>
</ods-dataset-context>
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="ods-widgets" ng-set-html="multiple_aggregations.html" ng-eval-javascript=""></div>
<h4 id="example_source">Source</h4>
<div source-edit="ods-widgets" source-edit-deps="angular.js" source-edit-html="multiple_aggregations_same_context.html" source-edit-css="" source-edit-js="" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="multiple_aggregations_same_context.html">
<pre class="prettyprint linenums" ng-set-text="multiple_aggregations_same_context.html"></pre>
<script type="text/ng-template" id="multiple_aggregations_same_context.html">
<ods-dataset-context context="tree"
                 tree-dataset="les-arbres-remarquables-de-paris"
                 tree-domain="https://documentation-resources.opendatasoft.com/">
<div ods-aggregation="total, mingirth, maxgirth"
     ods-aggregation-context="tree"
     ods-aggregation-total-function="COUNT"
     ods-aggregation-maxgirth-expression="circonference_en_cm"
     ods-aggregation-maxgirth-function="MAX"
     ods-aggregation-mingirth-expression="circonference_en_cm"
     ods-aggregation-mingirth-function="MIN">
    There are {{ total }} remarkable trees in Paris, with girth ranging from {{ mingirth }} to {{ maxgirth }} cm.
</div>
</ods-dataset-context>
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="ods-widgets" ng-set-html="multiple_aggregations_same_context.html" ng-eval-javascript=""></div>
</div></div>
</div>
