<h1><code ng:non-bindable="">odsMap</code>
<div><span class="hint">directive in module <code ng:non-bindable="">ods-widgets</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>The odsMap widget allows to build a map visualization and display data through various modes that can be composed of several dynamic layers, each being based on a <a href="#/api/ods-widgets.directive:odsDatasetContext">Dataset Context</a>.</p>
<p>odsMap is a base widget. Used on its own, it can only display a simple map with default configurations.</p>
<pre class="prettyprint linenums">
    &lt;!-- Displays a map of Paris using the data from mycontext and an automatic visualization mode --&gt;
    &lt;ods-map context="mycontext" location="12,48.85218,2.36996"&gt;&lt;/ods-map&gt;
</pre>
<p>odsMap can be combined with two related map widgets to create more complex maps and fully configure their modes and behaviors.</p>
<ul>
<li><a href="#/api/ods-widgets.directive:odsMapLayer">odsMapLayer</a>, allows to declare a layer of data to display on the map</li>
<li><a href="#/api/ods-widgets.directive:odsMapLayerGroup">odsMapLayerGroup</a>, allows to declare a group of layers</li>
</ul>
<p>In its fullest form, a map visualization would then be composed of several layers organized in groups. For more information on how to use and configure the odsMapLayer and odsMapLayerGroup widgets, see the <a href="#/api/ods-widgets.directive:odsMapLayer">odsMapLayer</a> and <a href="#/api/ods-widgets.directive:odsMapLayerGroup">odsMapLayerGroup</a> documentation.</p>
<pre class="prettyprint linenums">
   &lt;ods-map ...&gt;
      &lt;ods-map-layer-group ...&gt;
         &lt;ods-map-layer ...&gt;&lt;/ods-map-layer&gt;
         &lt;ods-map-layer ...&gt;&lt;/ods-map-layer&gt;
      &lt;/ods-map-layer-group&gt;
      &lt;ods-map-layer-group ...&gt;
         &lt;ods-map-layer ...&gt;&lt;/ods-map-layer&gt;
      &lt;/ods-map-layer-group&gt;
   &lt;/ods-map&gt;
</pre>
<p>odsMap, when used for a complex map visualization, is mostly used to set the basic configurations of the map (e.g., basemap, location). odsMap also helps set all map-controlling options, such as zoom configurations, buttons, search bar display, and groups and layers behavior control.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as element:<pre class="prettyprint linenums">&lt;ods-map
       context="{DatasetContext}"
       location="{string}"
       basemap="{string}"
       min-zoom="{integer}"
       max-zoom="{integer}"
       scroll-wheel-zoom="{boolean}"
       static-map="{boolean}"
       no-refit="{boolean}"
       toolbar-geolocation="{boolean}"
       auto-geolocation="{boolean}"
       toolbar-drawing="{boolean}"
       toolbar-fullscreen="{boolean}"
       display-control="{boolean}"
       display-control-single-layer="{boolean}"
       ods-auto-resize="{boolean}"
       search-box="{boolean}"
       display-legend="{boolean}"
       sync-to-url="{boolean}"
       sync-to-object="{Object}"&gt;
&lt;/ods-map&gt;</pre>
<h3 id="usage_directive-info">Directive info</h3>
<div class="directive-info"><ul><li>This directive creates new scope.</li>
</ul>
</div>
<h4 id="usage_directive-info_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>context</td><td><a href="" class="label type-hint type-hint-datasetcontext">DatasetContext</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p><i>(mandatory)</i> <a href="#/api/ods-widgets.directive:odsDatasetContext">Dataset Context</a> to use. If the <strong>context</strong> parameter is managed with <a href="#/api/ods-widgets.directive:odsMapLayer">odsMapLayer</a>, it should not be configured for odsMap.</p>
</div></td></tr><tr><td>location</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>Controls the default location of the map upon initialization. The value must be set under the following format: <code>zoom,latitude,longitude</code>.
For example, if you want to have a map centered on Paris, France, you should use <code>12,48.85218,2.36996</code>.
By default, if a location is not specified, the map will try to fit all the displayed data when initializing.</p>
</div></td></tr><tr><td>basemap</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>Identifier of the basemap to use by default, as defined in <a href="#/api/ods-widgets.ODSWidgetsConfigProvider">ODSWidgetsConfig.basemaps</a>. By default, the first available basemap will be used.</p>
</div></td></tr><tr><td>minZoom</td><td><a href="" class="label type-hint type-hint-integer">integer</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>Limits the map to a minimum zoom value. By default, this is defined by the minimum zoom of the basemap.</p>
</div> <p><em>(default: none)</em></p></td></tr><tr><td>maxZoom</td><td><a href="" class="label type-hint type-hint-integer">integer</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>Limits the map to a maximum zoom value. By default, this is defined by the maximum zoom of the basemap.</p>
</div> <p><em>(default: none)</em></p></td></tr><tr><td>scrollWheelZoom</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, scrolling the mouse wheel over the map can be used to zoom in or zoom out.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>staticMap</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, the map can&#39;t be zoomed in/out or moved. Markers are still clickable.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>noRefit</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>By default, the map refits its view whenever the displayed data changes. When set to <code>true</code>, the map stays at the same location.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>toolbarGeolocation</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, the &quot;geolocate&quot; button is displayed in the map&#39;s toolbar.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>autoGeolocation</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, the geolocation, which centers and zooms the map on the user&#39;s location, is automatically done upon initialization. <code>autoGeolocation</code> is only available when there is no <strong>location</strong> parameter set for the widget.</p>
<p>Caution: location sharing must be allowed priorly for Firefox users when multiple odsMap widget are set with <code>autoGeolocation=true</code> on the same page.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>toolbarDrawing</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>false</code>, the drawing tools to draw filter areas are not displayed in the map&#39;s toolbar.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>toolbarFullscreen</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>false</code>, the &quot;fullscreen&quot; button is not displayed in the map&#39;s toolbar.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>displayControl</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, displays a control to choose whether groups or single datasets outside groups should be displayed, using toggle buttons.</p>
<p>Note: it shouldn&#39;t be combined with the usage of <strong>showIf</strong> on <a href="#/api/ods-widgets.directive:odsMapLayer">odsMapLayer</a>, as it will lead to inconsistencies in the user interface.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>displayControlSingleLayer</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, only one layer is displayed at a time using the control of groups and single datasets display.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>odsAutoResize</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>For more information, see <a href="#/api/ods-widgets.directive:odsAutoResize">Auto Resize</a>.</p>
</div></td></tr><tr><td>searchBox</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, a search box is displayed on the map so that users can jump to another location through a search or search specific data on the map.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>displayLegend</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, a caption is displayed in the bottom right corner of the map.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>syncToUrl</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>When set to <code>true</code>, the settings of the <strong>location</strong> and <strong>basemap</strong> parameters are used in the page&#39;s URL.</p>
</div> <p><em>(default: none)</em></p></td></tr><tr><td>syncToObject</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><p>An object updated by the map&#39;s settings for the <strong>location</strong> and <strong>basemap</strong> parameters corresponding to new changes of location and basemap.</p>
</div> <p><em>(default: none)</em></p></td></tr></tbody></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="ods-widgets-directive-page ods-widgets-directive-odsmap-page"><h4 id="example_source">Source</h4>
<div source-edit="ods-widgets" source-edit-deps="angular.js" source-edit-html="odsMap_used_alone.html" source-edit-css="" source-edit-js="" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="odsMap_used_alone.html">
<pre class="prettyprint linenums" ng-set-text="odsMap_used_alone.html"></pre>
<script type="text/ng-template" id="odsMap_used_alone.html">
<ods-dataset-context context="countries"
                 countries-dataset="natural-earth-countries-110m"
                 countries-domain="https://documentation-resources.opendatasoft.com/">
<ods-map context="countries"
         location="2,41.88759,0.90273"
         basemap="jawg.light"></ods-map>
</ods-dataset-context>
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="ods-widgets" ng-set-html="odsMap_used_alone.html" ng-eval-javascript=""></div>
</div></div>
</div>
